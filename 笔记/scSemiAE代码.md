```python
# æ•°æ®ä¸ä¿å­˜è·¯å¾„
parser.add_argument("-dpath", "--data_path", default="./dataset/", help="æ•°æ®é›†æ–‡ä»¶å¤¹è·¯å¾„")
parser.add_argument("-spath", "--save_path", default="./output/", help="è¾“å‡ºç›®å½•è·¯å¾„")

# æœ‰æ ‡ç­¾æ•°æ®è®¾ç½®ï¼ˆæ•°é‡æˆ–æ¯”ä¾‹äºŒé€‰ä¸€ï¼‰
parser.add_argument("-lsize", "--lab_size", type=int, default=10, help="æ¯ç±»ç»†èƒçš„æœ‰æ ‡ç­¾æ ·æœ¬æ•°ï¼ˆé»˜è®¤ï¼š10ï¼‰")
parser.add_argument("-lratio", "--lab_ratio", type=float, default=-1, help="æ¯ç±»ç»†èƒçš„æœ‰æ ‡ç­¾æ ·æœ¬æ¯”ä¾‹ï¼ˆé»˜è®¤ï¼š-1ï¼Œä¸å¯ç”¨ï¼‰")

# éšæœºç§å­ä¸è®­ç»ƒç›¸å…³å‚æ•°
parser.add_argument("-s", "--seed", type=int, default=0, help="ç”¨äºåŠ è½½æ•°æ®çš„éšæœºç§å­ï¼ˆé»˜è®¤ï¼š0ï¼‰")
parser.add_argument('--cuda', action='store_true', help='æ˜¯å¦å¯ç”¨ CUDAï¼ˆGPUï¼‰')
parser.add_argument('-pretrain_batch', '--pretrain_batch', type=int, default=100, help="é¢„è®­ç»ƒæ—¶çš„æ‰¹å¤§å°ï¼ˆé»˜è®¤ï¼š100ï¼‰")
parser.add_argument('-nepoch', '--epochs', type=int, default=60, help='è®­ç»ƒè½®æ•°ï¼ˆé»˜è®¤ï¼š60ï¼‰')
parser.add_argument('-nepoch_pretrain', '--epochs_pretrain', type=int, default=50, help='é¢„è®­ç»ƒè½®æ•°ï¼ˆé»˜è®¤ï¼š50ï¼‰')
parser.add_argument('-lr', '--learning_rate', type=float, default=0.001, help='å­¦ä¹ ç‡ï¼ˆé»˜è®¤ï¼š0.001ï¼‰')
parser.add_argument('-lrS', '--lr_scheduler_step', type=int, default=10, help='å­¦ä¹ ç‡è°ƒåº¦ stepï¼ˆé»˜è®¤ï¼š10ï¼‰')
parser.add_argument('-lrG', '--lr_scheduler_gamma', type=float, default=0.5, help='å­¦ä¹ ç‡è°ƒåº¦ gammaï¼ˆé»˜è®¤ï¼š0.5ï¼‰')
parser.add_argument('-lbd', '--Lambda', type=float, default=1, help='L2 æ­£åˆ™åŒ–æƒé‡ï¼ˆé»˜è®¤ï¼š1ï¼‰')
parser.add_argument('-v', '--visual', type=bool, default=False, help='æ˜¯å¦å¯è§†åŒ–ç»“æœï¼ˆé»˜è®¤ï¼šFalseï¼‰')
```

#### æ•°æ®å¤„ç†ï¼ˆdata.py)


##### 1. `__init__(...)`

**ä½œç”¨ï¼š**  
åˆå§‹åŒ– `Data` ç±»ï¼Œè¯»å–è¡¨è¾¾çŸ©é˜µå’Œå…ƒæ•°æ®æ–‡ä»¶ï¼Œè®¾å®šåˆ’åˆ†æ ‡ç­¾çš„æ–¹å¼ï¼ˆæ•°é‡æˆ–æ¯”ä¾‹ï¼‰ã€‚

---

##### 2. `load_all(...)`

**ä½œç”¨ï¼š**  
åŠ è½½è¡¨è¾¾çŸ©é˜µ + æ ‡ç­¾ä¿¡æ¯ï¼Œå¹¶æŒ‰è®¾ç½®åˆ’åˆ†å‡ºæœ‰æ ‡ç­¾æ ·æœ¬å’Œæ— æ ‡ç­¾æ ·æœ¬çš„ç´¢å¼•ï¼ŒåŒæ—¶è¿”å›åŒ…å«ç»†èƒIDã€æ ‡ç­¾æ˜ å°„ç­‰çš„é¢å¤–ä¿¡æ¯ã€‚

**è¿”å›å†…å®¹åŒ…æ‹¬ï¼š**

- `expr`ï¼šè¡¨è¾¾çŸ©é˜µï¼ˆNumPyæ•°ç»„ï¼‰
    
- `lab_full`ï¼šæ‰€æœ‰ç»†èƒçš„æ•°å­—æ ‡ç­¾
    
- `labeled_idx`ï¼šæœ‰æ ‡ç­¾æ ·æœ¬ç´¢å¼•
    
- `unlabeled_idx`ï¼šæ— æ ‡ç­¾æ ·æœ¬ç´¢å¼•
    
- `info`ï¼šå…ƒä¿¡æ¯ï¼ˆæ ‡ç­¾æ˜ å°„ã€ç»†èƒIDã€åŸºå› åç­‰ï¼‰
    

---

##### 3. `hide_labs(...)`

**ä½œç”¨ï¼š**  
æ ¹æ®æ¯ç±»æ ·æœ¬çš„æ¯”ä¾‹æˆ–æ•°é‡ï¼Œéšè—éƒ¨åˆ†æ ‡ç­¾ï¼Œæ¨¡æ‹ŸåŠç›‘ç£å­¦ä¹ ã€‚é€‚åˆ**â€œæ‰€æœ‰ç±»åˆ«éƒ½æœ‰æ ‡ç­¾ä½†ä¸å®Œæ•´â€**çš„æƒ…å†µã€‚

**è¾“å…¥ï¼š**

- `lab`ï¼šæ‰€æœ‰æ ·æœ¬çš„æ ‡ç­¾ï¼ˆæ•´æ•°å½¢å¼ï¼‰
    

**è¾“å‡ºï¼š**

- æœ‰/æ— æ ‡ç­¾æ ·æœ¬çš„ç´¢å¼•
    

---

##### 4. `hide_some_labs(...)`

**ä½œç”¨ï¼š**  
è¿›ä¸€æ­¥æ¨¡æ‹Ÿæ›´å›°éš¾çš„æƒ…å½¢ï¼šåªå¯¹**éƒ¨åˆ†ç»†èƒç±»å‹**ä¿ç•™æ ‡ç­¾ï¼Œå…¶ä»–ç±»å‹å®Œå…¨æ— æ ‡ç­¾ï¼Œå¸¸ç”¨äº**é›¶æ ·æœ¬æˆ–å°æ ·æœ¬å­¦ä¹ **ã€‚

**è¾“å…¥ï¼š**

- `lab`ï¼šæ‰€æœ‰æ ·æœ¬çš„æ ‡ç­¾   
- `number`ï¼šæƒ³è¦ä¿ç•™æ ‡ç­¾çš„ç»†èƒç±»åˆ«æ•°é‡    

**è¾“å‡ºï¼š**

- æœ‰/æ— æ ‡ç­¾æ ·æœ¬çš„ç´¢å¼•
    

---

## ğŸ› ï¸ è¾…åŠ©å‡½æ•°ï¼ˆå¤–éƒ¨ï¼‰

### 5. `gen_idx_byclass(labels)`

**ä½œç”¨ï¼š**  
å°†æ ‡ç­¾åˆ—è¡¨åˆ†ç±»ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸ï¼š  
`{class_label: [è¯¥ç±»å¯¹åº”çš„æ ·æœ¬ç´¢å¼•]}`

ä¾¿äºåç»­æŒ‰ç±»åˆ«è¿›è¡Œæ ‡ç­¾éšè—æˆ–åˆ’åˆ†ã€‚

---

### 6. `celllabel_to_numeric(celllabel)`

**ä½œç”¨ï¼š**  
å°†åŸå§‹çš„ç»†èƒç±»å‹ï¼ˆå­—ç¬¦ä¸²ï¼‰è½¬æ¢ä¸ºæ•´æ•°å½¢å¼ï¼ˆæ¨¡å‹å¯æ¥å—ï¼‰ï¼ŒåŒæ—¶ç”Ÿæˆæ•°å­—ä¸åŸå§‹æ ‡ç­¾ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚

**è¿”å›ï¼š**

- `mapping`ï¼šæ•´æ•° â†” ç»†èƒæ ‡ç­¾ æ˜ å°„å­—å…¸
    
- `truth_labels`ï¼šè½¬ä¸ºæ•°å­—çš„æ ‡ç­¾æ•°ç»„ï¼ˆNumPyï¼‰
    

---

### 7. `techtype_to_numeric(batch_name)`

**ä½œç”¨ï¼š**  
å°†æ‰¹æ¬¡ä¿¡æ¯ï¼ˆå¦‚æµ‹åºå¹³å°åç­‰å­—ç¬¦ä¸²ï¼‰è½¬æ¢ä¸ºæ•´æ•°æ ‡ç­¾ï¼Œç”¨äºåç»­ batch effect å¤„ç†æˆ–å¯è§†åŒ–ã€‚

**è¿”å›ï¼š**

- `mapping`ï¼šæ•´æ•° â†” æ‰¹æ¬¡å æ˜ å°„å­—å…¸
    
- `truth_batches`ï¼šè½¬ä¸ºæ•´æ•°çš„æ‰¹æ¬¡æ•°ç»„ï¼ˆNumPyï¼‰
    

---

